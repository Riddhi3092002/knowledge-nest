<mat-card class="summarize-card">
  <h2>Summarize Document</h2>

  <div class="button-group">
    <button mat-raised-button color="primary" (click)="mode = 'upload'">Upload PDF</button>
    <button mat-raised-button color="accent" (click)="mode = 'paste'">Paste Text</button>
  </div>

  <div *ngIf="mode === 'upload'" class="upload-section">
  <div
    class="upload-drop-box"
    (click)="fileInput.click()"
    (dragover)="onDragOver($event)"
    (dragleave)="onDragLeave($event)"
    (drop)="onDrop($event)"
    [class.dragover]="isDragOver"
  >
    <mat-icon class="upload-icon" color="primary">cloud_upload</mat-icon>
    <div class="upload-instructions">
      <span>Drag & drop your PDF, TXT, or DOCX file here</span>
      <br />
      <span>or <b>click to browse</b></span>
    </div>
    <input
      #fileInput
      type="file"
      accept=".pdf,.txt,.docx"
      style="display: none"
      (change)="onFileSelected($event)"
    />
  </div>
  <div *ngIf="selectedFileName" class="file-name">
    <mat-icon color="accent" style="vertical-align: middle;">description</mat-icon>
    <span>Selected: {{ selectedFileName }}</span>
  </div>
  <div class="summarize-button">
    <button
      mat-raised-button
      color="accent"
      [disabled]="!selectedFile"
      (click)="submitFile()"
    >
      Summarize
    </button>
  </div>
</div>


  <div *ngIf="mode === 'paste'" class="paste-section">
    <mat-form-field appearance="fill" class="full-width">
      <textarea matInput placeholder="Paste your content here..." [(ngModel)]="textInput" rows="10"></textarea>
    </mat-form-field>
    <div class="summarize-button">
    <button mat-raised-button color="primary" (click)="summarizeText()" [disabled]="loading || textInput.length < 100">
      Summarize
    </button>
    </div>
  </div>


  <div *ngIf="loading" class="loading-spinner">
    <mat-progress-spinner mode="indeterminate" color="primary"></mat-progress-spinner>
  </div>

  <mat-card *ngIf="summary" class="summary-result full-width">
    <h3>Summary:</h3>
    <mat-form-field appearance="outline" class="full-width">
      <textarea matInput [value]="summary" readonly rows="10"></textarea>
    </mat-form-field>
  </mat-card>
</mat-card>
