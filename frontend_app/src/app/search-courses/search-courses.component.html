<div class="search-courses-container">
  <mat-form-field appearance="outline" class="search-field">
    <mat-label>Select course topic</mat-label>
    <mat-select [(ngModel)]="selectedTopic">
      <mat-option *ngFor="let topic of courseTopics" [value]="topic">
        {{ topic }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <button mat-raised-button color="primary" (click)="searchCourses()">
    Search
  </button>
</div>
<div class="instruction-text" *ngIf="courses && courses.length">
  <mat-icon style="vertical-align: middle; color: #2034a2;">info</mat-icon>
  <span>Click on a course title to view full details.</span>
</div>

<div class="courses-list" *ngIf="courses && courses.length">
  <mat-card class="course-card" *ngFor="let course of courses">
    <div class="title-row">
      <mat-card-title>
        <span class="clickable-title" (click)="openCourseDetail(course)">
          {{ course.Title }}
        </span>
      </mat-card-title>
    </div>
    <mat-card-content>
      <div class="skills-row">
        <span class="skills-label">Skills:</span>
        <span *ngIf="course.Skills && course.Skills.length; else noSkills">
          {{ course.Skills.join(", ") }}
        </span>
        <ng-template #noSkills>N/A</ng-template>
      </div>
      <div class="rating-row">
        <span class="rating-badge">{{
          course.Rating ? course.Rating : "N/A"
        }}</span>
      </div>
      <div class="course-link-row">
        <a
          [href]="course.URL"
          target="_blank"
          rel="noopener noreferrer"
          class="course-link"
          >{{ course.URL }}</a
        >
      </div>
    </mat-card-content>
    <button mat-stroked-button color="accent" (click)="startCourse(course)">
      Start Course
    </button>
  </mat-card>
</div>

<ng-template #successDialog let-data>
  <div style="color:#256029; background:#e8f5e9; padding:24px 18px; border-radius:10px; text-align:center; height: 150px">
    <mat-icon color="primary" style="font-size:2.5rem; padding: 20px">check_circle</mat-icon>
    <div style="margin-top:10px; font-size:1.15rem;">{{ data }}</div>
  </div>
</ng-template>

<ng-template #errorDialog let-data>
  <div style="color:#b71c1c; background:#ffebee; padding:24px 18px; border-radius:10px; text-align:center; height: 150px">
    <mat-icon color="warn" style="font-size:2.5rem; padding: 20px">error</mat-icon>
    <div style="margin-top:10px; font-size:1.15rem;">{{ data }}</div>
  </div>
</ng-template>